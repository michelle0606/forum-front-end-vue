{"version":3,"sources":["webpack:///./src/views/Restaurant.vue?2e7c","webpack:///./src/components/RestaurantDetail.vue?093a","webpack:///src/components/RestaurantDetail.vue","webpack:///./src/components/RestaurantDetail.vue?6c0d","webpack:///./src/components/RestaurantDetail.vue","webpack:///./src/components/RestaurantComments.vue?0932","webpack:///src/components/RestaurantComments.vue","webpack:///./src/components/RestaurantComments.vue?efcb","webpack:///./src/components/RestaurantComments.vue","webpack:///./src/components/CreateComment.vue?00db","webpack:///src/components/CreateComment.vue","webpack:///./src/components/CreateComment.vue?052a","webpack:///./src/components/CreateComment.vue","webpack:///src/views/Restaurant.vue","webpack:///./src/views/Restaurant.vue?a7a0","webpack:///./src/views/Restaurant.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","initial-restaurant","restaurant","restaurant-id","id","on","after-create-comment","afterCreateComment","restaurant-comments","restaurantComments","after-delete-comment","afterDeleteComment","staticRenderFns","RestaurantDetailvue_type_template_id_1f9c5847_render","_v","_s","name","categoryName","staticStyle","width","margin-bottom","src","image","opening_hours","tel","address","description","href","type","click","$event","stopPropagation","preventDefault","deleteFavorite","addFavorite","deleteLike","addLike","RestaurantDetailvue_type_template_id_1f9c5847_staticRenderFns","RestaurantDetailvue_type_script_lang_js_","props","initialRestaurant","Object","required","data","watch","_objectSpread","methods","isFavorited","isLiked","components_RestaurantDetailvue_type_script_lang_js_","component","componentNormalizer","RestaurantDetail","RestaurantCommentsvue_type_template_id_431a9b77_render","_l","comment","key","currentUser","handleDeleteButtonClick","_e","User","text","_f","createdAt","RestaurantCommentsvue_type_template_id_431a9b77_staticRenderFns","dummyUser","email","isAdmin","isAuthenticated","RestaurantCommentsvue_type_script_lang_js_","mixins","Array","commentId","$emit","components_RestaurantCommentsvue_type_script_lang_js_","RestaurantComments_component","RestaurantComments","CreateCommentvue_type_template_id_4961dba4_render","submit","handleSubmit","for","directives","rawName","value","expression","rows","domProps","input","target","composing","_m","CreateCommentvue_type_template_id_4961dba4_staticRenderFns","CreateCommentvue_type_script_lang_js_","restaurantId","Number","v4_default","components_CreateCommentvue_type_script_lang_js_","CreateComment_component","CreateComment","Restaurantvue_type_script_lang_js_","components","openingHours","created","$route","params","fetchRestaurant","beforeRouteUpdate","to","from","next","computed","Restaurantvue_type_script_lang_js_objectSpread","vuex_esm","_fetchRestaurant","asyncToGenerator","regeneratorRuntime","mark","_callee","_ref","statusText","wrap","_context","prev","restaurants","getRestaurant","sent","Error","Category","Comments","t0","helpers","fire","title","stop","_x","apply","arguments","filter","payload","unshift","RestaurantId","Date","views_Restaurantvue_type_script_lang_js_","Restaurant_component","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d21371b.ea1be774.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-5\"},[_c('RestaurantDetail',{attrs:{\"initial-restaurant\":_vm.restaurant}}),_c('hr'),_c('CreateComment',{attrs:{\"restaurant-id\":_vm.restaurant.id},on:{\"after-create-comment\":_vm.afterCreateComment}}),_c('RestaurantComments',{attrs:{\"restaurant-comments\":_vm.restaurantComments},on:{\"after-delete-comment\":_vm.afterDeleteComment}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12 mb-3\"},[_c('h1',[_vm._v(_vm._s(_vm.restaurant.name))]),_c('p',{staticClass:\"badge badge-secondary mt-1 mb-3\"},[_vm._v(\"\\n      \"+_vm._s(_vm.restaurant.categoryName)+\"\\n    \")])]),_c('div',{staticClass:\"col-lg-4\"},[_c('img',{staticClass:\"img-responsive center-block\",staticStyle:{\"width\":\"250px\",\"margin-bottom\":\"25px\"},attrs:{\"src\":_vm.restaurant.image}}),_c('div',{staticClass:\"contact-info-wrap\"},[_c('ul',{staticClass:\"list-unstyled\"},[_c('li',[_c('strong',[_vm._v(\"Opening Hour:\")]),_vm._v(\"\\n          \"+_vm._s(_vm.restaurant.opening_hours)+\"\\n        \")]),_c('li',[_c('strong',[_vm._v(\"Tel:\")]),_vm._v(\"\\n          \"+_vm._s(_vm.restaurant.tel)+\"\\n        \")]),_c('li',[_c('strong',[_vm._v(\"Address:\")]),_vm._v(\"\\n          \"+_vm._s(_vm.restaurant.address)+\"\\n        \")])])])]),_c('div',{staticClass:\"col-lg-8\"},[_c('p',[_vm._v(_vm._s(_vm.restaurant.description))]),_c('a',{staticClass:\"btn btn-primary btn-border mr-2\",attrs:{\"href\":\"#\"}},[_vm._v(\"Dashboard\")]),(_vm.restaurant.isFavorited)?_c('button',{staticClass:\"btn btn-danger btn-border mr-2\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteFavorite($event)}}},[_vm._v(\"\\n      移除最愛\\n    \")]):_c('button',{staticClass:\"btn btn-primary btn-border mr-2\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addFavorite($event)}}},[_vm._v(\"\\n      加到最愛\\n    \")]),(_vm.restaurant.isLiked)?_c('button',{staticClass:\"btn btn-danger like mr-2\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteLike($event)}}},[_vm._v(\"\\n      Unlike\\n    \")]):_c('button',{staticClass:\"btn btn-primary like mr-2\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addLike($event)}}},[_vm._v(\"\\n      Like\\n    \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"row\">\n    <div class=\"col-md-12 mb-3\">\n      <h1>{{ restaurant.name }}</h1>\n      <p class=\"badge badge-secondary mt-1 mb-3\">\n        {{ restaurant.categoryName }}\n      </p>\n    </div>\n    <div class=\"col-lg-4\">\n      <img\n        class=\"img-responsive center-block\"\n        :src=\"restaurant.image\"\n        style=\"width: 250px;margin-bottom: 25px;\"\n      />\n      <div class=\"contact-info-wrap\">\n        <ul class=\"list-unstyled\">\n          <li>\n            <strong>Opening Hour:</strong>\n            {{ restaurant.opening_hours }}\n          </li>\n          <li>\n            <strong>Tel:</strong>\n            {{ restaurant.tel }}\n          </li>\n          <li>\n            <strong>Address:</strong>\n            {{ restaurant.address }}\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class=\"col-lg-8\">\n      <p>{{ restaurant.description }}</p>\n      <a class=\"btn btn-primary btn-border mr-2\" href=\"#\">Dashboard</a>\n\n      <button\n        v-if=\"restaurant.isFavorited\"\n        type=\"button\"\n        class=\"btn btn-danger btn-border mr-2\"\n        @click.stop.prevent=\"deleteFavorite\"\n      >\n        移除最愛\n      </button>\n      <button\n        v-else\n        type=\"button\"\n        class=\"btn btn-primary btn-border mr-2\"\n        @click.stop.prevent=\"addFavorite\"\n      >\n        加到最愛\n      </button>\n      <button\n        v-if=\"restaurant.isLiked\"\n        type=\"button\"\n        class=\"btn btn-danger like mr-2\"\n        @click.stop.prevent=\"deleteLike\"\n      >\n        Unlike\n      </button>\n      <button\n        v-else\n        type=\"button\"\n        class=\"btn btn-primary like mr-2\"\n        @click.stop.prevent=\"addLike\"\n      >\n        Like\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    initialRestaurant: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      restaurant: this.initialRestaurant\n    }\n  },\n  watch: {\n    initialRestaurant(restaurant) {\n      this.restaurant = {\n        ...this.restaurant,\n        ...restaurant\n      }\n    }\n  },\n  methods: {\n    addFavorite() {\n      this.restaurant = {\n        ...this.restaurant, // 保留餐廳內原有資料\n        isFavorited: true\n      }\n    },\n    deleteFavorite() {\n      this.restaurant = {\n        ...this.restaurant, // 保留餐廳內原有資料\n        isFavorited: false\n      }\n    },\n    addLike() {\n      this.restaurant = {\n        ...this.restaurant,\n        isLiked: true\n      }\n    },\n    deleteLike() {\n      this.restaurant = {\n        ...this.restaurant,\n        isLiked: false\n      }\n    }\n  }\n}\n</script>\n>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestaurantDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestaurantDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RestaurantDetail.vue?vue&type=template&id=1f9c5847&\"\nimport script from \"./RestaurantDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./RestaurantDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',{staticClass:\"my-4\"},[_vm._v(\"所有評論：\")]),_vm._l((_vm.restaurantComments),function(comment){return _c('div',{key:comment.id},[_c('blockquote',{staticClass:\"blockquote mb-0\"},[(_vm.currentUser.isAdmin)?_c('button',{staticClass:\"btn btn-danger float-right\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleDeleteButtonClick(comment.id)}}},[_vm._v(\"Delete\")]):_vm._e(),_c('h3',[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(comment.User.name))])]),_c('p',[_vm._v(_vm._s(comment.text))]),_c('footer',{staticClass:\"blockquote-footer\"},[_vm._v(_vm._s(_vm._f(\"fromNow\")(comment.createdAt)))])]),_c('hr')])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h2 class=\"my-4\">所有評論：</h2>\n\n    <div v-for=\"comment in restaurantComments\" :key=\"comment.id\">\n      <blockquote class=\"blockquote mb-0\">\n        <button\n          v-if=\"currentUser.isAdmin\"\n          type=\"button\"\n          class=\"btn btn-danger float-right\"\n          @click.stop.prevent=\"handleDeleteButtonClick(comment.id)\"\n        >Delete</button>\n        <h3>\n          <a href=\"#\">{{comment.User.name}}</a>\n        </h3>\n        <p>{{ comment.text}}</p>\n        <footer class=\"blockquote-footer\">{{comment.createdAt | fromNow}}</footer>\n      </blockquote>\n      <hr />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { fromNowFilter } from \"./../utils/mixins\";\n\nconst dummyUser = {\n  currentUser: {\n    id: 1,\n    name: \"管理者\",\n    email: \"root@example.com\",\n    image: \"https://i.pravatar.cc/300\",\n    isAdmin: true\n  },\n  isAuthenticated: true\n};\n\nexport default {\n  mixins: [fromNowFilter],\n  props: {\n    restaurantComments: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      currentUser: dummyUser.currentUser\n    };\n  },\n  methods: {\n    handleDeleteButtonClick(commentId) {\n      this.$emit(\"after-delete-comment\", commentId);\n    }\n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestaurantComments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestaurantComments.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RestaurantComments.vue?vue&type=template&id=431a9b77&\"\nimport script from \"./RestaurantComments.vue?vue&type=script&lang=js&\"\nexport * from \"./RestaurantComments.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"text\"}},[_vm._v(\"留下評論：\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],staticClass:\"form-control\",attrs:{\"rows\":\"3\",\"name\":\"text\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}})]),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-right\"},[_c('button',{staticClass:\"btn btn-primary mr-0\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Submit\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <form @submit.stop.prevent=\"handleSubmit\">\n    <div class=\"form-group\">\n      <label for=\"text\">留下評論：</label>\n      <textarea v-model=\"text\" class=\"form-control\" rows=\"3\" name=\"text\" />\n    </div>\n    <div class=\"text-right\">\n      <button type=\"submit\" class=\"btn btn-primary mr-0\">Submit</button>\n    </div>\n  </form>\n</template>\n<script>\nimport uuid from \"uuid/v4\";\nexport default {\n  props: {\n    restaurantId: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {\n      text: \"\"\n    };\n  },\n  methods: {\n    handleSubmit() {\n      this.$emit(\"after-create-comment\", {\n        commentId: uuid(),\n        restaurantId: this.restaurantId,\n        text: this.text\n      });\n      this.text = \"\";\n    }\n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateComment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateComment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateComment.vue?vue&type=template&id=4961dba4&\"\nimport script from \"./CreateComment.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateComment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"container py-5\">\n    <RestaurantDetail :initial-restaurant=\"restaurant\" />\n    <hr />\n    <CreateComment\n      :restaurant-id=\"restaurant.id\"\n      @after-create-comment=\"afterCreateComment\"\n    />\n    <RestaurantComments\n      :restaurant-comments=\"restaurantComments\"\n      @after-delete-comment=\"afterDeleteComment\"\n    />\n  </div>\n</template>\n\n<script>\nimport RestaurantDetail from './../components/RestaurantDetail'\nimport RestaurantComments from './../components/RestaurantComments'\nimport CreateComment from './../components/CreateComment'\n\nimport restaurantsAPI from './../apis/restaurants'\nimport { Toast } from './../utils/helpers'\nimport { mapState } from 'vuex'\n\nexport default {\n  components: {\n    RestaurantDetail,\n    RestaurantComments,\n    CreateComment\n  },\n  data() {\n    return {\n      restaurant: {\n        id: -1,\n        name: '',\n        categoryName: '',\n        image: '',\n        openingHours: '',\n        tel: '',\n        address: '',\n        description: '',\n        isFavorited: false,\n        isLiked: false\n      },\n      restaurantComments: []\n    }\n  },\n  created() {\n    const { id: restaurantId } = this.$route.params\n    this.fetchRestaurant(restaurantId)\n  },\n  beforeRouteUpdate(to, from, next) {\n    const { id: restaurantId } = to.params\n    this.fetchRestaurant(restaurantId)\n    next()\n  },\n  computed: {\n    ...mapState(['currentUser'])\n  },\n  methods: {\n    async fetchRestaurant(restaurantId) {\n      try {\n        const { data, statusText } = await restaurantsAPI.getRestaurant({\n          restaurantId\n        })\n\n        if (statusText !== 'OK') {\n          throw new Error(statusText)\n        }\n\n        this.restaurant = {\n          id: data.restaurant.id,\n          name: data.restaurant.name,\n          categoryName: data.restaurant.Category.name,\n          image: data.restaurant.image,\n          openingHours: data.restaurant.opening_hours,\n          tel: data.restaurant.tel,\n          address: data.restaurant.address,\n          description: data.restaurant.description,\n          isFavorited: data.isFavorited,\n          isLiked: data.isLiked\n        }\n\n        this.restaurantComments = data.restaurant.Comments\n      } catch (error) {\n        Toast.fire({\n          type: 'error',\n          title: '無法取得餐廳資料，請稍後再試'\n        })\n      }\n    },\n    afterDeleteComment(commentId) {\n      this.restaurantComments = this.restaurantComments.filter(\n        comment => comment.id !== commentId\n      )\n    },\n    afterCreateComment(payload) {\n      const { commentId, restaurantId, text } = payload\n      this.restaurantComments.unshift({\n        id: commentId,\n        RestaurantId: restaurantId,\n        User: {\n          id: this.currentUser.id,\n          name: this.currentUser.name\n        },\n        text,\n        createdAt: new Date()\n      })\n    }\n  }\n}\n</script>\n>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Restaurant.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Restaurant.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Restaurant.vue?vue&type=template&id=de8f4830&\"\nimport script from \"./Restaurant.vue?vue&type=script&lang=js&\"\nexport * from \"./Restaurant.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}